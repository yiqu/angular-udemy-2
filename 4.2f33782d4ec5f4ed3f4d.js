(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{Yj9t:function(t,e,n){"use strict";n.r(e),n.d(e,"AuthModule",function(){return $});var r=n("ofXK"),a=n("3Pt+"),s=n("UmVK"),o=n("tyNb"),i=n("pLZG"),l=n("SxV6"),c=n("lJxs"),u=n("fXoL"),b=n("IYfF");let g=(()=>{class t{constructor(t,e){this.as=t,this.router=e}canActivate(t,e){return this.as.currentUser$.pipe(Object(i.a)(t=>null!==t),Object(l.a)(),Object(c.a)(t=>!t||this.router.createUrlTree(["/"])))}}return t.\u0275fac=function(e){return new(e||t)(u.Yb(b.a),u.Yb(o.b))},t.\u0275prov=u.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),p=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=u.Ib({type:t,selectors:[["app-auth"]],decls:2,vars:0,consts:[[1,"container-fluid","my-5"]],template:function(t,e){1&t&&(u.Ub(0,"div",0),u.Pb(1,"router-outlet"),u.Tb())},directives:[o.f],styles:[""]}),t})();function f(t,e,n=[],r=[]){return new a.e({value:t,disabled:e},n,r)}var d=n("XiUz"),m=n("znSr"),h=n("kmnG"),v=n("qFsG"),x=n("bTqV");const w=function(){return["/","auth","signup"]};let y=(()=>{class t{constructor(t,e,n,r){this.fb=t,this.router=e,this.route=n,this.as=r,this.loginFg=this.fb.group({name:f("test2@test.com",!1),password:f("123456",!1)})}ngOnInit(){}onSignin(){if(this.loginFg.value){const t=this.loginFg.value.name,e=this.loginFg.value.password;t&&e&&this.as.onSignin(t,e)}}}return t.\u0275fac=function(e){return new(e||t)(u.Ob(a.d),u.Ob(o.b),u.Ob(o.a),u.Ob(b.a))},t.\u0275cmp=u.Ib({type:t,selectors:[["app-login"]],decls:23,vars:3,consts:[["fxLayout","column","fxLayoutAlign","center center","fxLayoutGap","20px"],["fxLayout","row","ngClass.xs","full-w"],["role","alert","fxFlex.gt-xs","500px","fxFlex.xs","100%",1,"alert","alert-success"],[1,"mt-1","register"],[3,"routerLink"],["ngClass.xs","full-w",3,"formGroup"],["fxLayout","row"],["appearance","outline","fxFlex.gt-xs","500px"],["type","text","matInput","","placeholder","Login name","formControlName","name"],["type","password","matInput","","placeholder","Password","formControlName","password"],["ngClass.xs","full-w"],["ngClass.xs","full-w","fxFlex.gt-xs","500px","fxLayoutAlign","end"],["mat-flat-button","","color","primary",3,"click"]],template:function(t,e){1&t&&(u.Ub(0,"div",0),u.Ub(1,"div",1),u.Ub(2,"div",2),u.Bc(3," Sign in using your Health Manager account. "),u.Ub(4,"div",3),u.Ub(5,"a",4),u.Bc(6,"I don't have an account."),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Ub(7,"form",5),u.Ub(8,"section",6),u.Ub(9,"mat-form-field",7),u.Ub(10,"mat-label"),u.Bc(11,"Login name"),u.Tb(),u.Pb(12,"input",8),u.Tb(),u.Tb(),u.Ub(13,"section",6),u.Ub(14,"mat-form-field",7),u.Ub(15,"mat-label"),u.Bc(16,"Password"),u.Tb(),u.Pb(17,"input",9),u.Tb(),u.Tb(),u.Tb(),u.Ub(18,"section",10),u.Ub(19,"div",6),u.Ub(20,"div",11),u.Ub(21,"button",12),u.cc("click",function(){return e.onSignin()}),u.Bc(22,"Login"),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb()),2&t&&(u.Cb(5),u.lc("routerLink",u.mc(2,w)),u.Cb(2),u.lc("formGroup",e.loginFg))},directives:[d.c,d.b,d.d,m.a,d.a,o.d,a.q,a.m,a.g,h.c,h.g,v.b,a.c,a.l,a.f,x.a],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.alert[_ngcontent-%COMP%]   .register[_ngcontent-%COMP%]{font-size:12px;font-weight:700}"]}),t})();class C{isErrorState(t,e){return!!(t&&t.invalid&&(t.dirty||t.touched||e&&e.submitted))}}class T{isErrorState(t,e){return!(!t||!t.invalid)}}var U=n("wd/R");function F(t){const e=t.value;if(!(e&&""!==(""+e).trim()&&(e+"").trim().length>3))return{fieldTooShort:!0}}function O(t){if(!t.value)return{required:!0};const e=t.value,n=U().subtract(18,"years");return e.valueOf()>n.valueOf()?{invalidBirthday:!0}:void 0}function B(t){if(!t.value)return{valueIsNotTrue:!0}}var L=n("XNiG"),I=n("1G5W"),M=n("iadO"),P=n("bSwM");function S(t,e){1&t&&(u.Ub(0,"mat-error"),u.Bc(1," User name is "),u.Ub(2,"strong"),u.Bc(3,"required"),u.Tb(),u.Tb())}function A(t,e){1&t&&(u.Ub(0,"mat-error"),u.Bc(1," Password is "),u.Ub(2,"strong"),u.Bc(3,"required"),u.Tb(),u.Tb())}function k(t,e){if(1&t&&(u.Ub(0,"mat-hint",21),u.Bc(1),u.Tb()),2&t){const t=u.gc(2);u.Cb(1),u.Dc(" ",t.passwordCtrlValue?t.passwordCtrlValue.split("").length:0,"/4 ")}}function q(t,e){1&t&&(u.Ub(0,"mat-error"),u.Bc(1," Birthday is "),u.Ub(2,"strong"),u.Bc(3,"required"),u.Tb(),u.Tb())}function D(t,e){if(1&t&&(u.Ub(0,"mat-error"),u.Bc(1," You have to be born at least before "),u.Ub(2,"strong"),u.Bc(3),u.Tb(),u.Tb()),2&t){const t=u.gc(2);u.Cb(3),u.Cc(t.minBirthday)}}function G(t,e){if(1&t&&(u.Ub(0,"section",8),u.Ub(1,"form",9),u.Ub(2,"mat-form-field",10),u.Pb(3,"input",11),u.Ac(4,S,4,0,"mat-error",12),u.Ub(5,"mat-hint",13),u.Bc(6,"Required"),u.Tb(),u.Tb(),u.Ub(7,"mat-form-field",10),u.Pb(8,"input",14),u.Ac(9,A,4,0,"mat-error",12),u.Ub(10,"mat-hint",13),u.Bc(11,"Password has to be least 4 characters long"),u.Tb(),u.Ac(12,k,2,1,"mat-hint",15),u.Tb(),u.Ub(13,"mat-form-field",16),u.Ub(14,"mat-label"),u.Bc(15,"Birthday"),u.Tb(),u.Pb(16,"input",17),u.Pb(17,"mat-datepicker-toggle",18),u.Pb(18,"mat-datepicker",null,19),u.Ub(20,"mat-hint",13),u.Bc(21,"You have to be at least 18 years old"),u.Tb(),u.Ac(22,q,4,0,"mat-error",12),u.Ac(23,D,4,1,"mat-error",12),u.Tb(),u.Ub(24,"mat-checkbox",20),u.Bc(25," Agree to Terms and Conditions "),u.Tb(),u.Tb(),u.Tb()),2&t){const t=u.qc(19),e=u.gc();let n=null,r=null,a=null,s=null,o=null;u.Cb(1),u.lc("formGroup",e.signupFg),u.Cb(2),u.lc("errorStateMatcher",e.matcher),u.Cb(1),u.lc("ngIf",null==(n=e.signupFg.get("name"))?null:n.hasError("required")),u.Cb(4),u.lc("errorStateMatcher",e.matcher),u.Cb(1),u.lc("ngIf",null==(r=e.signupFg.get("password"))?null:r.hasError("required")),u.Cb(3),u.lc("ngIf",null==(a=e.signupFg.get("password"))?null:a.hasError("fieldTooShort")),u.Cb(4),u.lc("matDatepicker",t)("max",e.maxDate)("errorStateMatcher",e.matcher),u.Cb(1),u.lc("for",t),u.Cb(5),u.lc("ngIf",null==(s=e.signupFg.get("birthday"))?null:s.hasError("required")),u.Cb(1),u.lc("ngIf",null==(o=e.signupFg.get("birthday"))?null:o.hasError("invalidBirthday"))}}const j=function(){return["/","auth","signin"]},V=[{path:"",component:p,canActivate:[g],children:[{path:"",redirectTo:"signin",pathMatch:"full"},{path:"signin",component:y},{path:"signup",component:(()=>{class t{constructor(t,e,n,r){this.fb=t,this.router=e,this.route=n,this.as=r,this.compDest$=new L.a,this.matcher=new C,this.instaMatcher=new T,this.maxDate=U().subtract(1,"day"),this.signupFg=this.fb.group({name:f(null,!1,[a.p.required]),password:f(null,!1,[a.p.required,F]),birthday:f(null,!1,[O]),agree:f(!1,!1,[B])})}get passwordCtrlValue(){var t;return null===(t=this.signupFg.get("password"))||void 0===t?void 0:t.value}get minBirthday(){return U().subtract(18,"years").format("MM/DD/YYYY")}ngOnInit(){var t;null===(t=this.signupFg.get("password"))||void 0===t||t.valueChanges.pipe(Object(I.a)(this.compDest$)).subscribe(t=>{var e,n;let r=(null===(e=this.signupFg.get("password"))||void 0===e?void 0:e.value)?(null===(n=this.signupFg.get("password"))||void 0===n?void 0:n.value).split(""):[];r&&r.length>0&&" "===r[r.length-1]&&this.signupFg.get("password").setValue(r.slice(0,-1).join(""),{emitEvent:!1})}),this.signupFg.valueChanges.pipe(Object(I.a)(this.compDest$)).subscribe(t=>{})}onRegister(){if(this.signupFg.valid){console.log(this.getAllValues());const t=this.getAllValues();this.as.onSignUp(t.name,t.password)}}getAllValues(){return Object.assign(Object.assign({},this.signupFg.value),{birthday:this.signupFg.value.birthday?this.signupFg.value.birthday.valueOf():void 0})}onLogin(){this.router.navigate(["../","signin"],{relativeTo:this.route})}ngOnDestroy(){this.compDest$.next(),this.compDest$.complete()}}return t.\u0275fac=function(e){return new(e||t)(u.Ob(a.d),u.Ob(o.b),u.Ob(o.a),u.Ob(b.a))},t.\u0275cmp=u.Ib({type:t,selectors:[["app-auth-signup"]],decls:11,vars:4,consts:[["fxLayout","column","fxLayoutAlign","center center","fxLayoutGap","20px"],["fxLayout","row","ngClass.xs","full-w"],["role","alert","fxFlex.gt-xs","500px","fxFlex.xs","100%",1,"alert","alert-success"],[1,"mt-1","login"],[3,"routerLink"],["ngClass.gt-xs","signup-form","ngClass.xs","full-w",4,"ngIf"],["ngClass.gt-xs","actions","ngClass.xs","full-w","fxLayout","row","fxLayoutAlign","end"],["mat-flat-button","","color","primary",3,"disabled","click"],["ngClass.gt-xs","signup-form","ngClass.xs","full-w"],["fxLayout","column","fxLayoutAlign","start","fxLayoutGap","20px",3,"formGroup"],["appearance","outline",1,""],["type","text","matInput","","placeholder","User name","formControlName","name",3,"errorStateMatcher"],[4,"ngIf"],["align","start"],["type","password","matInput","","placeholder","Password","formControlName","password",3,"errorStateMatcher"],["align","end",4,"ngIf"],["appearance","outline"],["matInput","","formControlName","birthday",3,"matDatepicker","max","errorStateMatcher"],["matSuffix","",3,"for"],["dp",""],["labelPosition","after","formControlName","agree"],["align","end"]],template:function(t,e){1&t&&(u.Ub(0,"div",0),u.Ub(1,"div",1),u.Ub(2,"div",2),u.Bc(3," Sign up for a new account. "),u.Ub(4,"div",3),u.Ub(5,"a",4),u.Bc(6,"Already have an account?"),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Ac(7,G,26,12,"section",5),u.Ub(8,"section",6),u.Ub(9,"button",7),u.cc("click",function(){return e.onRegister()}),u.Bc(10,"Register"),u.Tb(),u.Tb(),u.Tb()),2&t&&(u.Cb(5),u.lc("routerLink",u.mc(3,j)),u.Cb(2),u.lc("ngIf",e.signupFg),u.Cb(2),u.lc("disabled",e.signupFg.invalid))},directives:[d.c,d.b,d.d,m.a,d.a,o.d,r.k,x.a,a.q,a.m,a.g,h.c,v.b,a.c,a.l,a.f,h.f,h.g,M.b,M.d,h.h,M.a,P.a,h.b],styles:[".actions[_ngcontent-%COMP%], .signup-form[_ngcontent-%COMP%]{width:500px}.title[_ngcontent-%COMP%]{font-size:20px}.alert[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]{font-size:12px;font-weight:700}"]}),t})()}]}];let Y=(()=>{class t{}return t.\u0275mod=u.Mb({type:t}),t.\u0275inj=u.Lb({factory:function(e){return new(e||t)},imports:[[o.e.forChild(V)],o.e]}),t})();var N=n("YUcS"),E=n("1yaQ"),_=n("FKr1");let $=(()=>{class t{}return t.\u0275mod=u.Mb({type:t}),t.\u0275inj=u.Lb({factory:function(e){return new(e||t)},providers:[{provide:_.c,useClass:E.c,deps:[_.f]},{provide:_.e,useValue:E.a}],imports:[[Y,s.a,a.h,a.o,r.c,E.b,N.a]]}),t})()}}]);