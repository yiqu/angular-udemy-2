(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{Yj9t:function(t,e,n){"use strict";n.r(e),n.d(e,"AuthModule",function(){return R});var r=n("ofXK"),a=n("3Pt+"),s=n("UmVK"),o=n("tyNb"),i=n("SxV6"),l=n("lJxs"),c=n("Jgta"),u=(n("6nsN"),n("HDdC")),b=n("fXoL"),g=n("IYfF");let p=(()=>{class t{constructor(t,e){this.as=t,this.router=e}canActivate(t,e){return new u.a(t=>{c.a.auth().onAuthStateChanged(e=>t.next(e),e=>t.error(e),()=>t.complete())}).pipe(Object(i.a)(),Object(l.a)(t=>!t||this.router.createUrlTree(["/"])))}}return t.\u0275fac=function(e){return new(e||t)(b.Yb(g.a),b.Yb(o.b))},t.\u0275prov=b.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),d=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=b.Ib({type:t,selectors:[["app-auth"]],decls:2,vars:0,consts:[[1,"container-fluid","my-5"]],template:function(t,e){1&t&&(b.Ub(0,"div",0),b.Pb(1,"router-outlet"),b.Tb())},directives:[o.f],styles:[""]}),t})();function f(t,e,n=[],r=[]){return new a.e({value:t,disabled:e},n,r)}var m=n("XiUz"),h=n("znSr"),v=n("kmnG"),x=n("qFsG"),w=n("bTqV");const y=function(){return["/","auth","signup"]};let C=(()=>{class t{constructor(t,e,n,r){this.fb=t,this.router=e,this.route=n,this.as=r,this.loginFg=this.fb.group({name:f("test2@test.com",!1),password:f("123456",!1)})}ngOnInit(){}onSignin(){if(this.loginFg.value){const t=this.loginFg.value.name,e=this.loginFg.value.password;t&&e&&this.as.onSignin(t,e)}}}return t.\u0275fac=function(e){return new(e||t)(b.Ob(a.d),b.Ob(o.b),b.Ob(o.a),b.Ob(g.a))},t.\u0275cmp=b.Ib({type:t,selectors:[["app-login"]],decls:23,vars:3,consts:[["fxLayout","column","fxLayoutAlign","center center","fxLayoutGap","20px"],["fxLayout","row","ngClass.xs","full-w"],["role","alert","fxFlex.gt-xs","500px","fxFlex.xs","100%",1,"alert","alert-success"],[1,"mt-1","register"],[3,"routerLink"],["ngClass.xs","full-w",3,"formGroup"],["fxLayout","row"],["appearance","outline","fxFlex.gt-xs","500px"],["type","text","matInput","","placeholder","Login name","formControlName","name"],["type","password","matInput","","placeholder","Password","formControlName","password"],["ngClass.xs","full-w"],["ngClass.xs","full-w","fxFlex.gt-xs","500px","fxLayoutAlign","end"],["mat-flat-button","","color","primary",3,"click"]],template:function(t,e){1&t&&(b.Ub(0,"div",0),b.Ub(1,"div",1),b.Ub(2,"div",2),b.Bc(3," Sign in using your Health Manager account. "),b.Ub(4,"div",3),b.Ub(5,"a",4),b.Bc(6,"I don't have an account."),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(7,"form",5),b.Ub(8,"section",6),b.Ub(9,"mat-form-field",7),b.Ub(10,"mat-label"),b.Bc(11,"Login name"),b.Tb(),b.Pb(12,"input",8),b.Tb(),b.Tb(),b.Ub(13,"section",6),b.Ub(14,"mat-form-field",7),b.Ub(15,"mat-label"),b.Bc(16,"Password"),b.Tb(),b.Pb(17,"input",9),b.Tb(),b.Tb(),b.Tb(),b.Ub(18,"section",10),b.Ub(19,"div",6),b.Ub(20,"div",11),b.Ub(21,"button",12),b.cc("click",function(){return e.onSignin()}),b.Bc(22,"Login"),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb()),2&t&&(b.Cb(5),b.lc("routerLink",b.mc(2,y)),b.Cb(2),b.lc("formGroup",e.loginFg))},directives:[m.c,m.b,m.d,h.a,m.a,o.d,a.q,a.m,a.g,v.c,v.g,x.b,a.c,a.l,a.f,w.a],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.alert[_ngcontent-%COMP%]   .register[_ngcontent-%COMP%]{font-size:12px;font-weight:700}"]}),t})();class T{isErrorState(t,e){return!!(t&&t.invalid&&(t.dirty||t.touched||e&&e.submitted))}}class U{isErrorState(t,e){return!(!t||!t.invalid)}}var F=n("wd/R");function O(t){const e=t.value;if(!(e&&""!==(""+e).trim()&&(e+"").trim().length>3))return{fieldTooShort:!0}}function B(t){if(!t.value)return{required:!0};const e=t.value,n=F().subtract(18,"years");return e.valueOf()>n.valueOf()?{invalidBirthday:!0}:void 0}function L(t){if(!t.value)return{valueIsNotTrue:!0}}var I=n("XNiG"),M=n("1G5W"),P=n("iadO"),S=n("bSwM");function A(t,e){1&t&&(b.Ub(0,"mat-error"),b.Bc(1," User name is "),b.Ub(2,"strong"),b.Bc(3,"required"),b.Tb(),b.Tb())}function k(t,e){1&t&&(b.Ub(0,"mat-error"),b.Bc(1," Password is "),b.Ub(2,"strong"),b.Bc(3,"required"),b.Tb(),b.Tb())}function q(t,e){if(1&t&&(b.Ub(0,"mat-hint",21),b.Bc(1),b.Tb()),2&t){const t=b.gc(2);b.Cb(1),b.Dc(" ",t.passwordCtrlValue?t.passwordCtrlValue.split("").length:0,"/4 ")}}function D(t,e){1&t&&(b.Ub(0,"mat-error"),b.Bc(1," Birthday is "),b.Ub(2,"strong"),b.Bc(3,"required"),b.Tb(),b.Tb())}function G(t,e){if(1&t&&(b.Ub(0,"mat-error"),b.Bc(1," You have to be born at least before "),b.Ub(2,"strong"),b.Bc(3),b.Tb(),b.Tb()),2&t){const t=b.gc(2);b.Cb(3),b.Cc(t.minBirthday)}}function V(t,e){if(1&t&&(b.Ub(0,"section",8),b.Ub(1,"form",9),b.Ub(2,"mat-form-field",10),b.Pb(3,"input",11),b.Ac(4,A,4,0,"mat-error",12),b.Ub(5,"mat-hint",13),b.Bc(6,"Required"),b.Tb(),b.Tb(),b.Ub(7,"mat-form-field",10),b.Pb(8,"input",14),b.Ac(9,k,4,0,"mat-error",12),b.Ub(10,"mat-hint",13),b.Bc(11,"Password has to be least 4 characters long"),b.Tb(),b.Ac(12,q,2,1,"mat-hint",15),b.Tb(),b.Ub(13,"mat-form-field",16),b.Ub(14,"mat-label"),b.Bc(15,"Birthday"),b.Tb(),b.Pb(16,"input",17),b.Pb(17,"mat-datepicker-toggle",18),b.Pb(18,"mat-datepicker",null,19),b.Ub(20,"mat-hint",13),b.Bc(21,"You have to be at least 18 years old"),b.Tb(),b.Ac(22,D,4,0,"mat-error",12),b.Ac(23,G,4,1,"mat-error",12),b.Tb(),b.Ub(24,"mat-checkbox",20),b.Bc(25," Agree to Terms and Conditions "),b.Tb(),b.Tb(),b.Tb()),2&t){const t=b.qc(19),e=b.gc();let n=null,r=null,a=null,s=null,o=null;b.Cb(1),b.lc("formGroup",e.signupFg),b.Cb(2),b.lc("errorStateMatcher",e.matcher),b.Cb(1),b.lc("ngIf",null==(n=e.signupFg.get("name"))?null:n.hasError("required")),b.Cb(4),b.lc("errorStateMatcher",e.matcher),b.Cb(1),b.lc("ngIf",null==(r=e.signupFg.get("password"))?null:r.hasError("required")),b.Cb(3),b.lc("ngIf",null==(a=e.signupFg.get("password"))?null:a.hasError("fieldTooShort")),b.Cb(4),b.lc("matDatepicker",t)("max",e.maxDate)("errorStateMatcher",e.matcher),b.Cb(1),b.lc("for",t),b.Cb(5),b.lc("ngIf",null==(s=e.signupFg.get("birthday"))?null:s.hasError("required")),b.Cb(1),b.lc("ngIf",null==(o=e.signupFg.get("birthday"))?null:o.hasError("invalidBirthday"))}}const Y=function(){return["/","auth","signin"]},j=[{path:"",component:d,children:[{path:"",redirectTo:"signin",pathMatch:"full"},{path:"signin",component:C,canActivate:[p]},{path:"signup",component:(()=>{class t{constructor(t,e,n,r){this.fb=t,this.router=e,this.route=n,this.as=r,this.compDest$=new I.a,this.matcher=new T,this.instaMatcher=new U,this.maxDate=F().subtract(1,"day"),this.signupFg=this.fb.group({name:f(null,!1,[a.p.required]),password:f(null,!1,[a.p.required,O]),birthday:f(null,!1,[B]),agree:f(!1,!1,[L])})}get passwordCtrlValue(){var t;return null===(t=this.signupFg.get("password"))||void 0===t?void 0:t.value}get minBirthday(){return F().subtract(18,"years").format("MM/DD/YYYY")}ngOnInit(){var t;null===(t=this.signupFg.get("password"))||void 0===t||t.valueChanges.pipe(Object(M.a)(this.compDest$)).subscribe(t=>{var e,n;let r=(null===(e=this.signupFg.get("password"))||void 0===e?void 0:e.value)?(null===(n=this.signupFg.get("password"))||void 0===n?void 0:n.value).split(""):[];r&&r.length>0&&" "===r[r.length-1]&&this.signupFg.get("password").setValue(r.slice(0,-1).join(""),{emitEvent:!1})}),this.signupFg.valueChanges.pipe(Object(M.a)(this.compDest$)).subscribe(t=>{})}onRegister(){if(this.signupFg.valid){console.log(this.getAllValues());const t=this.getAllValues();this.as.onSignUp(t.name,t.password)}}getAllValues(){return Object.assign(Object.assign({},this.signupFg.value),{birthday:this.signupFg.value.birthday?this.signupFg.value.birthday.valueOf():void 0})}onLogin(){this.router.navigate(["../","signin"],{relativeTo:this.route})}ngOnDestroy(){this.compDest$.next(),this.compDest$.complete()}}return t.\u0275fac=function(e){return new(e||t)(b.Ob(a.d),b.Ob(o.b),b.Ob(o.a),b.Ob(g.a))},t.\u0275cmp=b.Ib({type:t,selectors:[["app-auth-signup"]],decls:11,vars:4,consts:[["fxLayout","column","fxLayoutAlign","center center","fxLayoutGap","20px"],["fxLayout","row","ngClass.xs","full-w"],["role","alert","fxFlex.gt-xs","500px","fxFlex.xs","100%",1,"alert","alert-success"],[1,"mt-1","login"],[3,"routerLink"],["ngClass.gt-xs","signup-form","ngClass.xs","full-w",4,"ngIf"],["ngClass.gt-xs","actions","ngClass.xs","full-w","fxLayout","row","fxLayoutAlign","end"],["mat-flat-button","","color","primary",3,"disabled","click"],["ngClass.gt-xs","signup-form","ngClass.xs","full-w"],["fxLayout","column","fxLayoutAlign","start","fxLayoutGap","20px",3,"formGroup"],["appearance","outline",1,""],["type","text","matInput","","placeholder","User name","formControlName","name",3,"errorStateMatcher"],[4,"ngIf"],["align","start"],["type","password","matInput","","placeholder","Password","formControlName","password",3,"errorStateMatcher"],["align","end",4,"ngIf"],["appearance","outline"],["matInput","","formControlName","birthday",3,"matDatepicker","max","errorStateMatcher"],["matSuffix","",3,"for"],["dp",""],["labelPosition","after","formControlName","agree"],["align","end"]],template:function(t,e){1&t&&(b.Ub(0,"div",0),b.Ub(1,"div",1),b.Ub(2,"div",2),b.Bc(3," Sign up for a new account. "),b.Ub(4,"div",3),b.Ub(5,"a",4),b.Bc(6,"Already have an account?"),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ac(7,V,26,12,"section",5),b.Ub(8,"section",6),b.Ub(9,"button",7),b.cc("click",function(){return e.onRegister()}),b.Bc(10,"Register"),b.Tb(),b.Tb(),b.Tb()),2&t&&(b.Cb(5),b.lc("routerLink",b.mc(3,Y)),b.Cb(2),b.lc("ngIf",e.signupFg),b.Cb(2),b.lc("disabled",e.signupFg.invalid))},directives:[m.c,m.b,m.d,h.a,m.a,o.d,r.k,w.a,a.q,a.m,a.g,v.c,x.b,a.c,a.l,a.f,v.f,v.g,P.b,P.d,v.h,P.a,S.a,v.b],styles:[".actions[_ngcontent-%COMP%], .signup-form[_ngcontent-%COMP%]{width:500px}.title[_ngcontent-%COMP%]{font-size:20px}.alert[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]{font-size:12px;font-weight:700}"]}),t})()}]}];let N=(()=>{class t{}return t.\u0275mod=b.Mb({type:t}),t.\u0275inj=b.Lb({factory:function(e){return new(e||t)},imports:[[o.e.forChild(j)],o.e]}),t})();var E=n("YUcS"),_=n("1yaQ"),z=n("FKr1");let R=(()=>{class t{}return t.\u0275mod=b.Mb({type:t}),t.\u0275inj=b.Lb({factory:function(e){return new(e||t)},providers:[{provide:z.c,useClass:_.c,deps:[z.f]},{provide:z.e,useValue:_.a}],imports:[[N,s.a,a.h,a.o,r.c,_.b,E.a]]}),t})()}}]);