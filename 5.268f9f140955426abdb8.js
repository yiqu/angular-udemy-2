(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{Yj9t:function(t,e,r){"use strict";r.r(e),r.d(e,"AuthModule",function(){return z});var n=r("ofXK"),a=r("3Pt+"),s=r("UmVK"),o=r("tyNb"),i=r("pLZG"),c=r("SxV6"),l=r("lJxs"),u=r("fXoL"),b=r("IYfF");let g=(()=>{class t{constructor(t,e){this.as=t,this.router=e}canActivate(t,e){return this.as.currentUser$.pipe(Object(i.a)(t=>null!==t),Object(c.a)(),Object(l.a)(t=>!t||this.router.createUrlTree(["/"])))}}return t.\u0275fac=function(e){return new(e||t)(u.Yb(b.a),u.Yb(o.f))},t.\u0275prov=u.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),p=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=u.Ib({type:t,selectors:[["app-auth"]],decls:2,vars:0,consts:[[1,"container-fluid","my-5"]],template:function(t,e){1&t&&(u.Ub(0,"div",0),u.Pb(1,"router-outlet"),u.Tb())},directives:[o.j],styles:[""]}),t})();var f=r("ooqH"),m=r("XiUz"),d=r("znSr"),h=r("kmnG"),v=r("qFsG"),x=r("bTqV");const y=function(){return["/","auth","signup"]};function w(t,e){if(1&t&&(u.Sb(0),u.Ub(1,"div",11),u.Dc(2),u.Ub(3,"div",12),u.Ub(4,"a",13),u.Dc(5,"I don't have an account."),u.Tb(),u.Tb(),u.Tb(),u.Rb()),2&t){const t=e.ngIf;u.Cb(1),u.Eb("alert "+(t.error?"alert-danger":"alert-success")),u.Cb(1),u.Fc(" ",t.error?t.errorMsg:"Sign in using your Health Manager account."," "),u.Cb(2),u.mc("routerLink",u.nc(4,y))}}let C=(()=>{class t{constructor(t,e,r,n){this.fb=t,this.router=e,this.route=r,this.as=n,this.loginFg=this.fb.group({name:f.a("test2@test.com",!1),password:f.a("123456",!1)})}ngOnInit(){}onSignin(){if(this.loginFg.value){const t=this.loginFg.value.name,e=this.loginFg.value.password;t&&e&&this.as.onSignin(t,e)}}ngOnDestroy(){this.as.resetAuthErrorState()}}return t.\u0275fac=function(e){return new(e||t)(u.Ob(a.e),u.Ob(o.f),u.Ob(o.a),u.Ob(b.a))},t.\u0275cmp=u.Ib({type:t,selectors:[["app-login"]],decls:20,vars:4,consts:[["fxLayout","column","fxLayoutAlign","center center","fxLayoutGap","20px"],["fxLayout","row","ngClass.xs","full-w"],[4,"ngIf"],["ngClass.xs","full-w",3,"formGroup"],["fxLayout","row"],["appearance","outline","fxFlex.gt-xs","500px"],["type","text","matInput","","placeholder","Login name","formControlName","name"],["type","password","matInput","","placeholder","Password","formControlName","password"],["ngClass.xs","full-w"],["ngClass.xs","full-w","fxFlex.gt-xs","500px","fxLayoutAlign","end"],["mat-flat-button","","color","primary",3,"click"],["role","alert","fxFlex.gt-xs","500px","fxFlex.xs","100%"],[1,"mt-1","register"],[3,"routerLink"]],template:function(t,e){1&t&&(u.Ub(0,"div",0),u.Ub(1,"div",1),u.Bc(2,w,6,5,"ng-container",2),u.hc(3,"async"),u.Tb(),u.Ub(4,"form",3),u.Ub(5,"section",4),u.Ub(6,"mat-form-field",5),u.Ub(7,"mat-label"),u.Dc(8,"Login name"),u.Tb(),u.Pb(9,"input",6),u.Tb(),u.Tb(),u.Ub(10,"section",4),u.Ub(11,"mat-form-field",5),u.Ub(12,"mat-label"),u.Dc(13,"Password"),u.Tb(),u.Pb(14,"input",7),u.Tb(),u.Tb(),u.Tb(),u.Ub(15,"section",8),u.Ub(16,"div",4),u.Ub(17,"div",9),u.Ub(18,"button",10),u.cc("click",function(){return e.onSignin()}),u.Dc(19,"Login"),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb()),2&t&&(u.Cb(2),u.mc("ngIf",u.ic(3,2,e.as.authError$)),u.Cb(2),u.mc("formGroup",e.loginFg))},directives:[m.c,m.b,m.d,d.a,n.k,a.u,a.q,a.j,h.c,m.a,h.g,v.b,a.c,a.p,a.h,x.a,o.h],pipes:[n.b],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.alert[_ngcontent-%COMP%]   .register[_ngcontent-%COMP%]{font-size:12px;font-weight:700}"]}),t})();class T{isErrorState(t,e){return!!(t&&t.invalid&&(t.dirty||t.touched||e&&e.submitted))}}class U{isErrorState(t,e){return!(!t||!t.invalid)}}var F=r("wd/R");function D(t){const e=t.value;if(!(e&&""!==(""+e).trim()&&(e+"").trim().length>3))return{fieldTooShort:!0}}function O(t){if(!t.value)return{required:!0};const e=t.value,r=F().subtract(18,"years");return e.valueOf()>r.valueOf()?{invalidBirthday:!0}:void 0}function I(t){if(!t.value)return{valueIsNotTrue:!0}}var L=r("XNiG"),M=r("1G5W"),S=r("iadO"),P=r("bSwM");const k=function(){return["/","auth","signin"]};function E(t,e){if(1&t&&(u.Sb(0),u.Ub(1,"div",6),u.Dc(2),u.Ub(3,"div",7),u.Ub(4,"a",8),u.Dc(5,"Already have an account?"),u.Tb(),u.Tb(),u.Tb(),u.Rb()),2&t){const t=e.ngIf;u.Cb(1),u.Eb("alert "+(t.regError?"alert-danger":"alert-success")),u.Cb(1),u.Fc(" ",t.regError?t.regErrMsg:"Sign up for a new account."," "),u.Cb(2),u.mc("routerLink",u.nc(4,k))}}function q(t,e){1&t&&(u.Ub(0,"mat-error"),u.Dc(1," User name is "),u.Ub(2,"strong"),u.Dc(3,"required"),u.Tb(),u.Tb())}function j(t,e){1&t&&(u.Ub(0,"mat-error"),u.Dc(1," Password is "),u.Ub(2,"strong"),u.Dc(3,"required"),u.Tb(),u.Tb())}function A(t,e){if(1&t&&(u.Ub(0,"mat-hint",21),u.Dc(1),u.Tb()),2&t){const t=u.gc(2);u.Cb(1),u.Fc(" ",t.passwordCtrlValue?t.passwordCtrlValue.split("").length:0,"/4 ")}}function B(t,e){1&t&&(u.Ub(0,"mat-error"),u.Dc(1," Birthday is "),u.Ub(2,"strong"),u.Dc(3,"required"),u.Tb(),u.Tb())}function G(t,e){if(1&t&&(u.Ub(0,"mat-error"),u.Dc(1," You have to be born at least before "),u.Ub(2,"strong"),u.Dc(3),u.Tb(),u.Tb()),2&t){const t=u.gc(2);u.Cb(3),u.Ec(t.minBirthday)}}function Y(t,e){if(1&t&&(u.Ub(0,"section",9),u.Ub(1,"form",10),u.Ub(2,"mat-form-field",11),u.Pb(3,"input",12),u.Bc(4,q,4,0,"mat-error",2),u.Ub(5,"mat-hint",13),u.Dc(6,"Required"),u.Tb(),u.Tb(),u.Ub(7,"mat-form-field",11),u.Pb(8,"input",14),u.Bc(9,j,4,0,"mat-error",2),u.Ub(10,"mat-hint",13),u.Dc(11,"Password has to be least 4 characters long"),u.Tb(),u.Bc(12,A,2,1,"mat-hint",15),u.Tb(),u.Ub(13,"mat-form-field",16),u.Ub(14,"mat-label"),u.Dc(15,"Birthday"),u.Tb(),u.Pb(16,"input",17),u.Pb(17,"mat-datepicker-toggle",18),u.Pb(18,"mat-datepicker",null,19),u.Ub(20,"mat-hint",13),u.Dc(21,"You have to be at least 18 years old"),u.Tb(),u.Bc(22,B,4,0,"mat-error",2),u.Bc(23,G,4,1,"mat-error",2),u.Tb(),u.Ub(24,"mat-checkbox",20),u.Dc(25," Agree to Terms and Conditions "),u.Tb(),u.Tb(),u.Tb()),2&t){const t=u.rc(19),e=u.gc();let r=null,n=null,a=null,s=null,o=null;u.Cb(1),u.mc("formGroup",e.signupFg),u.Cb(2),u.mc("errorStateMatcher",e.matcher),u.Cb(1),u.mc("ngIf",null==(r=e.signupFg.get("name"))?null:r.hasError("required")),u.Cb(4),u.mc("errorStateMatcher",e.matcher),u.Cb(1),u.mc("ngIf",null==(n=e.signupFg.get("password"))?null:n.hasError("required")),u.Cb(3),u.mc("ngIf",null==(a=e.signupFg.get("password"))?null:a.hasError("fieldTooShort")),u.Cb(4),u.mc("matDatepicker",t)("max",e.maxDate)("errorStateMatcher",e.matcher),u.Cb(1),u.mc("for",t),u.Cb(5),u.mc("ngIf",null==(s=e.signupFg.get("birthday"))?null:s.hasError("required")),u.Cb(1),u.mc("ngIf",null==(o=e.signupFg.get("birthday"))?null:o.hasError("invalidBirthday"))}}const V=[{path:"",component:p,canActivate:[g],children:[{path:"",redirectTo:"signin",pathMatch:"full"},{path:"signin",component:C},{path:"signup",component:(()=>{class t{constructor(t,e,r,n){this.fb=t,this.router=e,this.route=r,this.as=n,this.compDest$=new L.a,this.matcher=new T,this.instaMatcher=new U,this.maxDate=F().subtract(1,"day"),this.signupFg=this.fb.group({name:f.a("test1@aol.com",!1,[a.t.required]),password:f.a("123456",!1,[a.t.required,D]),birthday:f.a(null,!1,[O]),agree:f.a(!1,!1,[I])})}get passwordCtrlValue(){var t;return null===(t=this.signupFg.get("password"))||void 0===t?void 0:t.value}get minBirthday(){return F().subtract(18,"years").format("MM/DD/YYYY")}ngOnInit(){var t;null===(t=this.signupFg.get("password"))||void 0===t||t.valueChanges.pipe(Object(M.a)(this.compDest$)).subscribe(t=>{var e,r;let n=(null===(e=this.signupFg.get("password"))||void 0===e?void 0:e.value)?(null===(r=this.signupFg.get("password"))||void 0===r?void 0:r.value).split(""):[];n&&n.length>0&&" "===n[n.length-1]&&this.signupFg.get("password").setValue(n.slice(0,-1).join(""),{emitEvent:!1})}),this.signupFg.valueChanges.pipe(Object(M.a)(this.compDest$)).subscribe(t=>{})}onRegister(){if(this.signupFg.valid){const t=this.getAllValues();this.as.onSignUp(t.name,t.password)}}getAllValues(){return Object.assign(Object.assign({},this.signupFg.value),{birthday:this.signupFg.value.birthday?this.signupFg.value.birthday.valueOf():void 0})}onLogin(){this.router.navigate(["../","signin"],{relativeTo:this.route})}ngOnDestroy(){this.as.resetAuthErrorState(),this.compDest$.next(),this.compDest$.complete()}}return t.\u0275fac=function(e){return new(e||t)(u.Ob(a.e),u.Ob(o.f),u.Ob(o.a),u.Ob(b.a))},t.\u0275cmp=u.Ib({type:t,selectors:[["app-auth-signup"]],decls:8,vars:5,consts:[["fxLayout","column","fxLayoutAlign","center center","fxLayoutGap","20px"],["fxLayout","row","ngClass.xs","full-w"],[4,"ngIf"],["ngClass.gt-xs","signup-form","ngClass.xs","full-w",4,"ngIf"],["ngClass.gt-xs","actions","ngClass.xs","full-w","fxLayout","row","fxLayoutAlign","end"],["mat-flat-button","","color","primary",3,"disabled","click"],["role","alert","fxFlex.gt-xs","500px","fxFlex.xs","100%"],[1,"mt-1","login"],[3,"routerLink"],["ngClass.gt-xs","signup-form","ngClass.xs","full-w"],["fxLayout","column","fxLayoutAlign","start","fxLayoutGap","20px",3,"formGroup"],["appearance","outline",1,""],["type","text","matInput","","placeholder","User name","formControlName","name",3,"errorStateMatcher"],["align","start"],["type","password","matInput","","placeholder","Password","formControlName","password",3,"errorStateMatcher"],["align","end",4,"ngIf"],["appearance","outline"],["matInput","","formControlName","birthday",3,"matDatepicker","max","errorStateMatcher"],["matSuffix","",3,"for"],["dp",""],["labelPosition","after","formControlName","agree"],["align","end"]],template:function(t,e){1&t&&(u.Ub(0,"div",0),u.Ub(1,"div",1),u.Bc(2,E,6,5,"ng-container",2),u.hc(3,"async"),u.Tb(),u.Bc(4,Y,26,12,"section",3),u.Ub(5,"section",4),u.Ub(6,"button",5),u.cc("click",function(){return e.onRegister()}),u.Dc(7,"Register"),u.Tb(),u.Tb(),u.Tb()),2&t&&(u.Cb(2),u.mc("ngIf",u.ic(3,3,e.as.authError$)),u.Cb(2),u.mc("ngIf",e.signupFg),u.Cb(2),u.mc("disabled",e.signupFg.invalid))},directives:[m.c,m.b,m.d,d.a,n.k,x.a,m.a,o.h,a.u,a.q,a.j,h.c,v.b,a.c,a.p,a.h,h.f,h.g,S.b,S.d,h.h,S.a,P.a,h.b],pipes:[n.b],styles:[".actions[_ngcontent-%COMP%], .signup-form[_ngcontent-%COMP%]{width:500px}.title[_ngcontent-%COMP%]{font-size:20px}.alert[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]{font-size:12px;font-weight:700}"]}),t})()}]}];let N=(()=>{class t{}return t.\u0275mod=u.Mb({type:t}),t.\u0275inj=u.Lb({factory:function(e){return new(e||t)},imports:[[o.i.forChild(V)],o.i]}),t})();var $=r("YUcS"),_=r("1yaQ"),R=r("FKr1");let z=(()=>{class t{}return t.\u0275mod=u.Mb({type:t}),t.\u0275inj=u.Lb({factory:function(e){return new(e||t)},providers:[{provide:R.c,useClass:_.c,deps:[R.f]},{provide:R.e,useValue:_.a}],imports:[[N,s.a,a.l,a.s,n.c,_.b,$.a]]}),t})()}}]);